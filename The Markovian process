import matplotlib.pyplot as plt
import networkx as nx

# Ã‰tats de la chaÃ®ne
states = ["Soleil â˜€ï¸", "Pluie ğŸŒ§ï¸", "Nuage â˜ï¸"]

# Matrice de transition
transitions = {
    ("Soleil â˜€ï¸", "Soleil â˜€ï¸"): 0.6,
    ("Soleil â˜€ï¸", "Pluie ğŸŒ§ï¸"): 0.3,
    ("Soleil â˜€ï¸", "Nuage â˜ï¸"): 0.1,
    ("Pluie ğŸŒ§ï¸", "Soleil â˜€ï¸"): 0.2,
    ("Pluie ğŸŒ§ï¸", "Pluie ğŸŒ§ï¸"): 0.5,
    ("Pluie ğŸŒ§ï¸", "Nuage â˜ï¸"): 0.3,
    ("Nuage â˜ï¸", "Soleil â˜€ï¸"): 0.3,
    ("Nuage â˜ï¸", "Pluie ğŸŒ§ï¸"): 0.3,
    ("Nuage â˜ï¸", "Nuage â˜ï¸"): 0.4,
}

# CrÃ©ation du graphe
G = nx.DiGraph()

# Ajout des nÅ“uds
G.add_nodes_from(states)

# Ajout des arÃªtes avec poids
for (src, dst), prob in transitions.items():
    G.add_edge(src, dst, weight=prob)

# Position circulaire des nÅ“uds
pos = nx.circular_layout(G)

# Dessin du graphe
plt.figure(figsize=(8, 6))
nx.draw_networkx_nodes(G, pos, node_size=3000, node_color="lightyellow", edgecolors="black")
nx.draw_networkx_labels(G, pos, font_size=12, font_family="sans-serif")

# ArÃªtes + Ã©tiquettes de probabilitÃ©
edges = G.edges(data=True)
nx.draw_networkx_edges(G, pos, edge_color='gray', arrows=True)
edge_labels = {(u, v): f"{d['weight']:.1f}" for u, v, d in edges}
nx.draw_networkx_edge_labels(G, pos, edge_labels=edge_labels, font_size=10)

plt.title("ChaÃ®ne de Markov : PrÃ©vision MÃ©tÃ©o", fontsize=14)
plt.axis('off')
plt.show()
